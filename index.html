<!DOCTYPE html>
<html>
<head>
  <title>m4dz's talks</title>
  <meta charset="utf-8">

  <link rel="stylesheet" href="./styles/remark-cozy.css" media="screen" charset="utf-8">

  <script src="./vendor/svg-injector.min.js" defer></script>
  <script src="./vendor/remark-dev.min.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let query = {}
      window.location.search.slice(1).split('&').forEach((search) => {
        [key, value] = search.split('=')
        query[key] = value
      })

      console.debug(query)

      remark.macros.ref = function() {
        return `<div class="ref"><a href="http://talks.m4dz.net/?deck=${query.deck}">talks.m4dz.net/?deck=${query.deck}</a></div>`
      }

      const slideshow = remark.create({
        sourceUrl:      `./decks/${query.deck}.md`,
        ratio:          (query.wide && JSON.parse(query.wide))? '16:9' : '4:3',
        highlightStyle: 'github',
        highlightLines: true,
        highlightSpans: true
      })

      slideshow.on('afterShowSlide', (slide) => {
        SVGInjector(document.querySelectorAll('.remark-visible [src*=icons]'))

        if(slide.properties.name == 'thanks') {
          setTimeout(() => {
            document.getElementById('slide-thanks').classList.add('scroll')
          }, 2000)
        }
      })
    })
  </script>
</head>
</html>
